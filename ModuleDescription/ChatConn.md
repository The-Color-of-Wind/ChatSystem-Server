# 业务处理（ChatConn）

### 描述
每个客户端连接由一个 `ChatConn` 对象维护，封装了 socket、读写缓冲区、用户状态等，配合自定义协议进行消息收发、业务逻辑处理。

### 设计
- 使用自定义协议格式：**前4字节表示消息长度 + JSON正文**；
- `ChatConn` 负责：
  - 数据接收（拆包处理，确保粘包/拆包安全）
  - 消息解析（提取操作类型如登录/发消息等）
  - 数据发送（编码并缓存在发送缓冲区）
- 结合线程池调度，将 `ChatConn` 投递为任务进行处理；
- 完整实现消息接收、协议解析、逻辑处理、应答发送闭环。

> **特点**：封装清晰、上下文状态完整、拆包机制安全可靠，拆分成功率达 100%。
